# Flask 文件上传系统

一个基于 Flask 的安全文件上传系统，支持密码验证、验证码保护和自定义上传路径功能。

## 特性

- 🔐 **多层安全验证**：
  - 密码登录保护
  - 动态验证码验证（含干扰线、噪点和旋转字符）
- 📁 **文件管理功能**：
  - 上传文件到指定目录 (`/static/uploads`)
  - 支持自定义子目录上传
  - 防目录遍历攻击安全处理
- 🌐 **便捷访问**：
  - 上传成功后可直接通过链接访问文件
  - 响应式界面设计
- 🔧 **易于配置**：
  - 集中化配置管理
  - 灵活的参数调整

## 技术栈

- **后端**：Python Flask
- **前端**：HTML, CSS
- **图像处理**：Pillow (PIL)

## 安装与启动

### 环境要求
- Python 3.6+ 
- pip 包管理器

### 安装步骤

1. 克隆或下载项目代码

2. 安装依赖包：
```bash
pip install -r requirements.txt
```

3. 修改配置文件 `config.py`（重要！）：
```python
# 修改默认密码
PASSWORD = "your-secure-password"

# 修改随机密钥
SECRET_KEY = "your-random-secret-key"
```

4. 启动应用：
```bash
python app.py
```

5. 访问系统：
   打开浏览器，输入 `http://localhost:5000` 访问系统

## 配置说明

所有配置项集中在 `config.py` 文件中：

- `UPLOAD_FOLDER`：上传文件保存目录，默认为 `static/uploads`
- `PASSWORD`：登录密码，默认值为 `123456`（**请务必修改**）
- `SECRET_KEY`：Flask session 密钥，用于加密会话数据（**请务必修改**）

## 使用说明

### 登录流程
1. 访问系统首页，进入登录页面
2. 输入密码和验证码
3. 点击登录按钮进入上传页面

### 文件上传
1. 在上传页面选择要上传的文件
2. （可选）输入子目录名称，文件将上传到该子目录
3. 点击上传按钮
4. 上传成功后，系统会显示文件保存路径和访问链接

### 文件访问
- 上传成功后，可通过页面提供的链接直接访问文件
- 文件 URL 格式：`http://localhost:5000/uploads/[子目录名]/[文件名]`

## 项目结构

```
├── app.py                # 主应用程序文件
├── config.py             # 配置文件
├── requirements.txt      # 项目依赖
├── static/               # 静态资源目录
│   ├── style.css         # 样式文件
│   └── uploads/          # 上传文件存储目录
└── templates/            # HTML 模板
    ├── login.html        # 登录页面
    ├── upload.html       # 上传页面
    └── success.html      # 成功页面
```

## 安全提示

1. **首次使用前必须修改默认密码和密钥**
2. 定期更新密码和密钥以提高安全性
3. 注意文件上传的大小限制（Flask 默认限制为 16MB）
4. 建议在生产环境中关闭 debug 模式
5. 生产环境建议配置 HTTPS

## 常见问题

### 验证码无法正常显示
- 确保已安装 Pillow 库：`pip install Pillow`
- 检查系统中是否有可用的中文字体

### 文件上传失败
- 检查文件大小是否超过限制
- 确认目标目录是否有写权限
- 检查子目录名称是否包含特殊字符

## 扩展建议

1. 添加文件类型限制功能
2. 增加文件大小限制配置
3. 实现用户管理系统，支持多用户
4. 添加文件预览和管理功能
5. 集成数据库存储文件元信息

## 贡献

欢迎提交 issues 和 pull requests 来改进这个项目。


